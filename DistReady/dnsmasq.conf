# Captive Portal - dnsmasq Configuration
# DNS and DHCP server for captive portal

# Interface binding
interface=wlan0
listen-address=192.168.4.1
# bind-interfaces removed - causes timing issues when IP assignment is slow
# dnsmasq will bind to the interface specified above without strict binding

# Prevent using system DNS/hosts (ensures all queries go to us)
no-resolv
no-hosts

# DHCP Configuration
dhcp-range=192.168.4.2,192.168.4.20,12h
dhcp-option=3,192.168.4.1
dhcp-option=6,192.168.4.1

# Captive Portal URI (RFC 8910) - Direct notification to modern devices
# This tells devices "there's a captive portal here" without relying on DNS hijacking
dhcp-option=114,http://192.168.4.1/

# Redirect ALL domains to captive portal IP
# This is the key setting that makes captive portal detection work
address=/#/192.168.4.1
